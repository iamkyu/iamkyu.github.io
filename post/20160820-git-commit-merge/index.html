<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=google-site-verification content="<google-site-verification-code>"><meta name=author content="남규진"><meta name=description content="남규진의 개발 블로그"><meta name=keywords content="java,spring framework"><meta name=referrer content="always"><title>GIT 여러 커밋을 하나로 합치기 - namkyujin.com</title><link rel=stylesheet type=text/css href=/css/main.css><link rel=icon href=/logo/favicon.ico type=image/x-icon></head><body><header><div><h1><a href=https://iamkyu.github.io>namkyujin.com</a></h1></div><nav><a href=/>blog</a><a href=https://github.com/iamkyu/TIL/blob/master/books/books.md>books</a><a href=/about/>about</a></nav></header><main><article><div class=meta><div>2016-08-20</div><div><span><a href=https://iamkyu.github.io/tags/git/>#git</a></span></div></div><div class=content><h1 id=git-여러-commit을-하나로-합치기>GIT 여러 commit을 하나로 합치기</h1><p>버전 관리 시스템은 변경 내역을 기록하고 보관 하기 위해 사용하는 만큼 이력들(commit log)를 잘 관리하는 것이 중요하다. 이를 위해서는 은근히 신경 써야 할 것 들이 많은데</p><ol><li>좋은 커밋 메시지를 작성한다.</li><li>일련된 작업 단위의 커밋</li><li>커밋 전략, 브런치 전략 등등</li></ol><p>회사에서는 SVN을 사용하고 개인 작업용으로는 주로 Git을 사용했는데 최근 스터디 모임등으로 인해 Git으로 협업을 하게 되었다. 따라서 혼자 브런치를 가르고 합치는 등의 방법을 연습하고 있는데 아주 재미있다.</p><p>현재 진행하는 스터디 모임에서는 각자가 담당 도메인마다 브런치(Brunch)를 따서 작업을 하고, 한 주간 완료 된 작업은 다시 <code>develop</code> 브런치로 <code>Pull Request</code> 를 보내 반영하는 식으로 진행한다.</p><p>이 때 발생 한 문제는, 같은 내용이 여러 커밋에 거쳐 나눠진다는 것이다. 무슨 말이냐면</p><ul><li>수요일에 일단 작업을 마무리 하고 커밋을 했다.</li><li>목요일날 생각해보니 조금 수정을 해야할 것 같다. 수정을 하고 커밋을 했다.</li><li>금요일날 또 생각해보니 수정을 해야할 것 같다. 수정을 하고 커밋을 했다.</li></ul><p>최초에 기능을 개발한 후, 2번의 수정을 거쳤다. 물론 나의 입장 에서 보면 별개의 작업들이지만, 내 커밋 로그들이 여러 사람들의 커밋로그들이 모두 합쳐질 통합 브런치에 포함된다고 생각해보자.
그렇게 생각해보면 이 세 개의 커밋들은 결국 하나의 커밋으로 합쳐 통합 브런치에 포함하는 것이 낫다고 할 수 있다.</p><h2 id=여러-커밋-하나로-합치기>여러 커밋 하나로 합치기</h2><p>이미 모든 작업들이 커밋 완료 된 상황이다. 나는 최근 2개의 커밋을 하나로 합칠 것이다.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>$ git rebase -i HEAD~2
</code></pre></div><p>위의 명령어로 최근 현재 HEAD 부터 최근 2개의 커밋을 <code>rebase</code> 하라고 명령한다. (만약 커밋하지 않은 파일이 있다면 <code>--autostash</code>를 붙여준다.)
그럼 아래와 같은 화면이 나타난다.</p><p><img src="https://lh3.googleusercontent.com/5uVhOFXnEVcjomrdC4ac8EcNAXfGULBWvKfzYoffvwaBX8tv6Muc_NuMNMBdHKw5Dt7sjClEevMvlwSkA1IIxzW7sFQ9_-9PIlVxGLp4JL2ksDwkSNRfxQlFA_GkMeViEicUYzy22_CUduOcsUH_DE5bLwUwpIkWOu2Txw6kQvUEJ6WD-Fs8dkeX2r0uH-M3vo9mKZzz1QZhFXJODzSAl_kKzNzG7xeB30M5dGYScYLyMSrvYtKN4uYINDioiwITXmjZ3OfsmNZQhrJa8OFpDcrJXPR_1EZ8zagEdLrGjPq6DHdAUcKqrbq-G5D8cBYJ4LyBU1X9ZAoM0onCp46JEDR4DMhXoZWtZQSPFA10hbt-pIX3QLWkIeXdtUzQRCg3BAejHFX9p91uTGdsxl7QHrlAaJ9vFmeUdDAezm-ZbvfhWudo0SjmFFlztnth0RFROulgJYzlKFaVYi-C8LYp5vjujuaOAAirbiKmu_6RcUWd77bZumzoe0lbUN0_l0BF2H5F66svj92Ee_RIUL-uGNWEZOJlPgxPoiZbS5Jfosvsccu4Ddgp9IuyTGq4jBjwIze0esX7GXRzPjmdPmG-8H2Ii80zNCzhc8UjlyiIWhSscKzo=w668-h272-no" alt></p><p>두번째 줄의 <code>pick</code>을 <code>squash</code>로 변경한 후 <code>:x</code>. 그럼 합친 커밋의 커밋 메시지를 새로 작성할 수 있게 해준다. 아래와 같이 커밋 메세지를 새롭게 입력한 후 <code>:x</code></p><p><img src="https://lh3.googleusercontent.com/M4uz1Mmol5IMDLpqUrD5sS6KIK9up3vSEYLZcZLTxOH1d_Ui6Cg0WGpNOEgZKiN_pc0mePIgptrK-z2b5kLWl64m-1q2YBiTae3c_F-CkHtsHHr2T2IZ-_SPAYbI9X-raaRWw1gxzjbhpaTnmqsQgFRlFOI8ZBok5g-LIhyLCpMVBfPlCX_-gACX-B5pyCtyEUWMJFvioMDSqRpBD-vVCcWohOz5HNOyOPCKksA6QHaddJN6l1McfgD7L5DlSuU6nFlkEpY8QaPC7OXf_znB0rJHxLUOrrF4Psdm1kzZ6SwWDrRUcSVBsw7_F6oeijKVsKz1zJwVaQzyKIKV2KSw5MISuyXYp-zkB1Ss166jW6ER4pasXTJj-svCbrnjR6Mtlpno7avrFi3iCnaR2IT2es2TH9VowdzmHzc2nHJUMAxRMp4XLTuWV5q4NoGI6nm0yJJyrf48iuKiRm-1zDG-1iogF-WnL6QteEtEpYCSh4qro9g3PBJpv57IlVrvncBEAc0yiHU3DdEcCLQjQjBGQKMJvS-dfN6fRgPiT9JxzJZEkZCiz2HyR7PLho-uo48q7dLay9IEHX7imkpKdXqLJ5UqkdOAfDbN0k_IJoeIigBcTza2=w587-h280-no" alt></p><p>이제 합친 커밋을 원격 저장소에 <code>push</code> 를 하면 오류가 발생한다.</p><p><img src="https://lh3.googleusercontent.com/kYfnwS2gL1KAqgywyeTL1IldOEQQ-4p_k_EAuwqe9Dl5AI5YjD3_RpIdEw9rUoHOz37jvQawe0VnfPhG8K4dDmjkAugVC_E_UnL9vgTLcS4oT2HPQsL4E5JKT83mvbFJc-E5Iz_6HFgkSJGm_bYO_Va2T2osxagt7zaXAbm1vNbolK6aNG5nj_aEve1bVra-AGZDWa3gkzKVUvICL1j9LevcI4n4xdm7ftjTumXnqaZafsF3JE2mJn1qdSFMI0_lTC6KnCcUT1Fl3vR57GL6kvfUFNF6cMksUzKRlrI5dutNWR-8y4MVAy1-MIXhNtU5M-z-MPQfxG6qOkDHi4gT5hUGDNWFIQJL_DRBrUvS41UKf1FAqrEexOxZBZqQwVzI48gsCz6Xtr1inYO1BvhRKC0aDo91D2WN-TuQtI0QkDTYO9-1uZPLUtwVefd4y8J0HTFCgG3hvl7fhh-TI-swN3Qvdh9NNUkoQEqLW0TIkakd6zIpWtUnRlPgwq9UUTHjZ7b2X31yfUUn_bla0QOzTAkDTbCN8olSYZfm0TSbd4IOEi5IuuN-lNG4ICKlJu1ThMqU8WmtpRFzyDbcqJW3U5rBJ0cF_XnrMWVLNCWYNn1Bn8Yz=w668-h138-no" alt></p><p>왜냐하면 히스토리로 봤을 때는 현재 로컬저장소에서 원격저장소로 푸쉬하려는 커밋은 HEAD가 더 뒤에 있기 때문이다. 위에서 커밋을 합치는 과정에서 더 이전의 커밋으로 합치는 과정을 거쳤기 때문인듯 하다. 이때에는 브런치명 앞에 <code>+</code> 를 포함하여 강제로 푸쉬(force push)를 한다.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>$ git push origin +브런치명
</code></pre></div><p>force push 를 할 때는 항상 주의해야 한다.</p><h2 id=참고자료>참고자료</h2><ul><li><a href=https://git-scm.com/book/ko/v1/Git-%EB%8F%84%EA%B5%AC-%ED%9E%88%EC%8A%A4%ED%86%A0%EB%A6%AC-%EB%8B%A8%EC%9E%A5%ED%95%98%EA%B8%B0>Git - 히스토리 단장하기</a></li><li><a href=https://charsyam.wordpress.com/2013/01/11/%EC%9E%85-%EA%B0%9C%EB%B0%9Cgit-%EC%97%AC%EB%9F%AC-%EA%B0%9C%EC%9D%98-commit-%ED%95%98%EB%82%98%EB%A1%9C-%ED%95%A9%EC%B9%98%EA%B8%B0/>[입 개발]GIT: 여러 개의 commit 하나로 합치기</a></li></ul></div><div class=side style=position:fixed;right:50px;max-width:255px;overflow:auto;top:120px;width:220px;bottom:90px><div class=toc><div class=page-header><strong>Table of contents</strong></div><div id=page-scrollspy class=toc-nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#git-%ec%97%ac%eb%9f%ac-commit%ec%9d%84-%ed%95%98%eb%82%98%eb%a1%9c-%ed%95%a9%ec%b9%98%ea%b8%b0>GIT 여러 commit을 하나로 합치기</a></li></ul><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%ec%97%ac%eb%9f%ac-%ec%bb%a4%eb%b0%8b-%ed%95%98%eb%82%98%eb%a1%9c-%ed%95%a9%ec%b9%98%ea%b8%b0>여러 커밋 하나로 합치기</a></li></ul></ul><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%ec%b0%b8%ea%b3%a0%ec%9e%90%eb%a3%8c>참고자료</a></li></ul></ul></div></div></div><script src=https://utteranc.es/client.js repo=iamkyu/iamkyu.github.io issue-term=title label=comment theme=github-light crossorigin=anonymous async></script></article></main><footer><div><div>&copy; 2020 Kyujin Nam. <a href=https://creativecommons.org/licenses/by/4.0/deed.ko>CC-BY-4.0</a><p>Powered by <a href=https://gohugo.io/>Hugo</a> with <a href=https://github.com/yanlinlin82/simple-style>Simple-Style</a></div></div></footer><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-87267111-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><a href=https://github.com/iamkyu/iamkyu.github.io class=github-corner aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media(max-width:800px){.github-corner{display:none}}</style></body></html>