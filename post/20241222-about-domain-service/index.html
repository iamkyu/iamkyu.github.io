<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=google-site-verification content="<google-site-verification-code>"><meta name=author content="남규진"><meta name=description content="남규진의 개발 블로그"><meta name=keywords content="java,spring framework"><meta name=referrer content="always"><title>책에서 찾은 도메인 서비스의 역할과 책임 - namkyujin.com</title><link rel=stylesheet type=text/css href=/css/main.css><link rel=icon href=/logo/favicon.ico type=image/x-icon></head><body><header><div><h1><a href=https://iamkyu.github.io>namkyujin.com</a></h1></div><nav><a href=/>blog</a><a href=https://github.com/iamkyu/TIL/blob/master/books/books.md>books</a><a href=/about/>about</a></nav></header><main><article><div class=meta><div>2024-12-22</div></div><div class=content><h1 id=책에서-찾은-도메인-서비스의-역할과-책임>책에서 찾은 도메인 서비스의 역할과 책임</h1><p>최근 팀 내에서 ‘도메인 서비스’의 책임과 역할에 관해 논의할 기회가 있었다.
그 과정에서 팀원들 간에 생각의 차이가 꽤 있다는 점을 느꼈다.
이 차이를 이해하고자 ‘도메인 서비스’의 개념과 목적을 다시 살펴보기로 했다.</p><p>특히, 이 개념을 처음 소개한(아마도) 에릭 에반스의 <em>도메인 주도 설계</em> (이대엽 역, 위키북스, 2011)와 함께,</p><ul><li>반 버논의 <em>도메인 주도 설계 구현</em> (윤창석, 황예진 역, 에이콘, 2016),</li><li>블라드 코노노프의 <em>도메인 주도 설계 첫걸음</em> (김민석, 오창윤 역, 위키북스, 2022)</li></ul><p>등 주요 도서를 참고하여 개념을 종합해 보았다.
이 글은 개인적인 의견보다는 위 세 권의 책에서 ‘서비스’와 ‘도메인 서비스’ 개념에 관한 주요 인용구를 모아 정리한 글이다.</p><h2 id=먼저-서비스란>먼저 서비스란?</h2><blockquote><p>설계가 매우 명확하고 실용적이더라도 개념적으로 어떠한 객체에도 속하지 않는 연산이 포함 될 때가 있다. 이러한 문제를 억지로 해결하려 하기보다는 문제 자체의 면면에 따라 SERVICE를 모델에 명시적으로 포함할 수 있다. - 에릭 에반스, <em>도메인 주도 설계</em>, 이대엽 역, 위키북스, 2011.</p></blockquote><p>에릭 에반스의 도메인 주도 설계에서 서비스는 다음과 같은 특성을 가진다고 한다.</p><ul><li>다른 객체와의 관계를 강조</li><li>활동으로 이름을 지음(Entity 가 주로 동사나 명사로 이름을 부여하는 것과 달리)</li><li>서비스를 정의하는 기준은 순전히 사용하는 측에 무엇을 제공하느냐에 있음</li></ul><p>또한 응용, 도메인, 인프라스트럭처 등 여러 계층에서 서비스라는 이름의 책임을 가지는 객체가 존재할 수 있다고 한다.</p><h2 id=그럼-도메인-서비스란>그럼 도메인 서비스란?</h2><blockquote><p>도메인의 개념 가운데 객체로는 모델에 어울리지 않는 것이 있다. 필요한 도메인 기능을 ENTITY나 VALUE에서 억지로 맡게 하면 모델에 기반을 둔 객체의 정의가 왜곡되거나, 또는 무의미하고 인위적으로 만들어진 객체가 추가될 것이다. (중략)
도메인의 중대한 프로세스나 변환 과정이 ENTITY나 VALUE OBJECT의 고유한 책임이 아니라면 연산을 SERVICE로 선언되는 독립 인터페이스로 모델에 추가하라. 모델의 언어라는 측면에서 인터페이스를 정의하고 연산의 이름을 UBIQUITOUS LANGUAGE의 일부가 되게끔 구성하라. SERVICE는 상태를 갖지 않게 만들어라.
-에릭 에반스, <em>도메인 주도 설계</em>, 이대엽 역, 위키북스, 2011.</p></blockquote><blockquote><p>도메인 고유의 작업을 수행하는 무상태의 오퍼레이션
-반 버논, <em>도메인 주도 설계 구현,</em> 윤창석, 황예진 역, 에이콘, 2016.</p></blockquote><blockquote><p>비즈니스 로직을 구현한 상태가 없는 객체(stateless object)다. 대부분의 경우 이런 로직은 어떤 계산이나 분석을 수행하기 위한 다양한 시스템 구성요소의 호출을 조율 한다.
-블라드 코노노프, <em>도메인 주도 설계 첫걸음,</em> 김민석, 오창윤 역, 위키북스, 2022.</p></blockquote><hr><p>반 버논의 도메인주도설계구현에서 도메인 서비스는 아래와 같은 상황에 사용할 수 있다고 한다.</p><ul><li>중요한 비즈니스를 수행할 때</li><li>어떤 컴포지션에서 다른 컴포지션으로 도메인 객체를 변형할 때</li><li>하나 이상의 도메인 객체에서 필요로 하는 입력 값을 계산할 때</li></ul><blockquote><p>도메인 모델은 일반적으로 비즈니스의 특정 측면에 집중된 소단위 행동을 처리하기 때문에, 도메인의 서비스는 <strong>도메인 모델과 비슷한 원칙을 고수하는 경향</strong>이 있다. 다수의 도메인 객체를 하나의 원자적 오퍼레이션으로 처리하므로 <strong>복잡성이 약간 확대</strong>될 가능성이 있다.
-반 버논, <em>도메인 주도 설계 구현,</em> 윤창석, 황예진 역, 에이콘, 2016.</p></blockquote><p>더불어 도메인 서비스 도출에 대해 아래와 같은 주의를 하기도 한다.</p><blockquote><p>서비스로 도메인 개념을 모델링하는 데 너무 의존하지 말라. 상황이 적절할 때만 사용해야 한다. 신중을 기해서 사용하지 않으면 서비스를 모델링 문제를 해결하는 묘책이라 여길 수도 있다. 서비스를 지나치게 사용하면 애너믹 도메인 모델이 만들어지는 부정적인 결과를 초래할 수 있는데, 대부분의 도메인 로직이 엔터티와 값 객체 전체로 흩어지지 못하고 서비스에만 몰리게 된다.
-반 버논, <em>도메인 주도 설계 구현,</em> 윤창석, 황예진 역, 에이콘, 2016.</p></blockquote><p>에릭 에반스는 잘 만들어진 도메인 서비스는 아래와 같은 특징을 가진다고 한다.</p><ol><li>연산이 원래부터 ENTITY 나 VALUE OBJECT의 일부를 구성하는 것이 아니라 도메인 개념과 관련돼 있다</li><li>인터페이스가 도메인 모델의 외적 요소의 측면에서 정의된다</li><li>연산이 상태를 갖지 않는다</li></ol><h2 id=예제>예제</h2><p>반버논의 책에서 나온 예제로</p><ul><li>설계 초기 단계 BacklogItem은 Product 의 일부로 구성된 애그리게잇으로 모델링 됨.</li><li>요구사항과 설계 전략의 변화로 두 모델은 분리 됨.</li><li>이에 따라 Product 모델의 <code>businessPriorityTotals()</code> 은 backlogItems을 전달마다 연산을 수행하게 변경 됨.</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#8be9fd;font-style:italic>public</span> <span style=color:#8be9fd;font-style:italic>class</span> <span style=color:#50fa7b>Product</span> <span style=color:#ff79c6>{</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    <span style=color:#8be9fd;font-style:italic>public</span> <span style=color:#8be9fd;font-style:italic>static</span> BusinessPriorityTotals <span style=color:#50fa7b>businessPriorityTotals</span><span style=color:#ff79c6>(</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>        Set<span style=color:#ff79c6>&lt;</span>BacklogItem<span style=color:#ff79c6>&gt;</span> backlogItems
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>    <span style=color:#ff79c6>)</span> <span style=color:#ff79c6>{</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>        <span style=color:#6272a4>// do something
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span style=color:#6272a4></span>    <span style=color:#ff79c6>}</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span style=color:#ff79c6>}</span>
</code></pre></div><p>애그리게잇이 분리된 상황에서 <code>businessPriorityTotals()</code> 은 정적 메서드로 Product 가 책임을 가지는게 올바른 해결책이었을까? 어쩐지 불편한 모델링이다.
이런 상황에서 도메인 서비스라는 모델링 도구를 통해 문제를 해결할 수 있다고 한다.</p><p>도메인서비스를 구현한 책의 예제는 아래와 같은 것들이 있다.</p><ul><li><a href=https://github.com/wikibook/lddd/blob/1693101887375709b95b6a3ffe518cef4b0e7cb4/listings/06-18.cs>ResponseTimeFrameCalculationService</a></li><li><a href=https://github.com/VaughnVernon/IDDD_Samples/blob/master/iddd_identityaccess/src/main/java/com/saasovation/identityaccess/domain/model/access/AuthorizationService.java>AuthorizationService</a></li></ul><h2 id=책-구매하기>책 구매하기</h2><ul><li><a href="https://search.shopping.naver.com/book/catalog/32464065589?query=%EB%8F%84%EB%A9%94%EC%9D%B8%20%EC%A3%BC%EB%8F%84%20%EC%84%A4%EA%B3%84&NaPm=ct%3Dm4zbh1w8%7Cci%3D46aafe0eb258e205e92b515aa9ac40e5858be5e9%7Ctr%3Dboksl%7Csn%3D95694%7Chk%3Dfbb8d0fafd1d050b83e109cb9f20d70e4006f6ec">도메인 주도 설계, 에릭 에반스 저, 이대엽 역, 위키북스, 2011.</a></li><li><a href="https://search.shopping.naver.com/book/catalog/32458977251?query=%5B%EB%8F%84%EB%A9%94%EC%9D%B8%20%EC%A3%BC%EB%8F%84%20%EC%84%A4%EA%B3%84%20%EA%B5%AC%ED%98%84%2C&NaPm=ct%3Dm4zbhv7s%7Cci%3D017ac9c67a399dc50fafc78e62898a674e23e5de%7Ctr%3Dboksl%7Csn%3D95694%7Chk%3Dfc63650f0ec227b845d4f2d81bdf9c79de747ad1">도메인 주도 설계 구현, 반 버논 저, 윤창석, 황예진 역, 에이콘, 2016.</a></li><li><a href="https://search.shopping.naver.com/book/catalog/32557654619?query=%EB%8F%84%EB%A9%94%EC%9D%B8%20%EC%A3%BC%EB%8F%84%20%EC%84%A4%EA%B3%84%20%EC%B2%AB%EA%B1%B8%EC%9D%8C&NaPm=ct%3Dm4zbi58w%7Cci%3D5e64fe3e355cf2551d6b151282f421ab2f435825%7Ctr%3Dboksl%7Csn%3D95694%7Chk%3D0607559aa8b51f6dfb81cdfeb56681ae7535203d">도메인 주도 설계 첫걸음, 블라드 코노노프 저, 김민석, 오창윤 역, 위키북스, 2022.</a></li></ul></div><div class=side style=position:fixed;right:50px;max-width:255px;overflow:auto;top:120px;width:220px;bottom:90px><div class=toc><div class=page-header><strong>Table of contents</strong></div><div id=page-scrollspy class=toc-nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%ec%b1%85%ec%97%90%ec%84%9c-%ec%b0%be%ec%9d%80-%eb%8f%84%eb%a9%94%ec%9d%b8-%ec%84%9c%eb%b9%84%ec%8a%a4%ec%9d%98-%ec%97%ad%ed%95%a0%ea%b3%bc-%ec%b1%85%ec%9e%84>책에서 찾은 도메인 서비스의 역할과 책임</a></li></ul><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%eb%a8%bc%ec%a0%80-%ec%84%9c%eb%b9%84%ec%8a%a4%eb%9e%80>먼저 서비스란?</a></li></ul></ul><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%ea%b7%b8%eb%9f%bc-%eb%8f%84%eb%a9%94%ec%9d%b8-%ec%84%9c%eb%b9%84%ec%8a%a4%eb%9e%80>그럼 도메인 서비스란?</a></li></ul></ul><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%ec%98%88%ec%a0%9c>예제</a></li></ul></ul><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%ec%b1%85-%ea%b5%ac%eb%a7%a4%ed%95%98%ea%b8%b0>책 구매하기</a></li></ul></ul></div></div></div></article></main><footer><div><div>&copy; 2024 Kyujin Nam. <a href=https://creativecommons.org/licenses/by/4.0/deed.ko>CC-BY-4.0</a><p>Powered by <a href=https://gohugo.io/>Hugo</a> with <a href=https://github.com/yanlinlin82/simple-style>Simple-Style</a></div></div></footer><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-87267111-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><a href=https://github.com/iamkyu/iamkyu.github.io class=github-corner aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media(max-width:800px){.github-corner{display:none}}</style></body></html>